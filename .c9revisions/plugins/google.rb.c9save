{"ts":1358959488226,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1358959314698,"patch":[[{"diffs":[[1,"# encoding: utf-8\r\n\r\nclass Google\r\n    include Cinch::Plugin\r\n\r\n\tmatch /g(?:oogle)? (.+)/i\r\n\r\n\tdef execute(m, query)\r\n\t\treturn unless ignore_nick(m.user.nick).nil?\r\n\t\tbegin\r\n\r\n\t\t\t@bitly = Bitly.new($BITLYUSER, $BITLYAPI)\r\n\r\n\t\t\t@url = open(\"https://encrypted.google.com/search?hl=en&q=#{URI.escape(query)}\", \"User-Agent\" => \"Lynx/2.8.6rel.5 libwww-FM/2.14\")\r\n\t\t\t@url = Nokogiri::HTML(@url)\r\n\r\n\t\t\tdef search(number)\r\n\t\t\t\ttitle    = @url.xpath(\"//p[#{number}]/a\").inner_html.gsub(/<\\/?b>/, '\u0002')\r\n\t\t\t\turl      = @url.xpath(\"//table[#{number+3}]/tr/td[@class='j']/font/a[last()]/@href\").text.gsub('/search?q=related:', '').gsub('&hl=en', '')\r\n\r\n\t\t\t\t\"Google \u00032|\u0003 %s \u00032|\u0003 \u001f%s\u001f\" % [title, url]\r\n\t\t\tend\r\n\r\n\t\t\tmore  = @bitly.shorten(\"https://encrypted.google.com/search?hl=en&q=#{URI.escape(query)}\")\r\n\r\n\t\t\tm.reply search(1)\r\n\t\t\tm.reply search(2)\r\n\t\t\tm.reply \"Google \u00032|\u0003 More results \u001f#{more.shorten}\u001f\"\r\n\t\trescue\r\n\t\t\tm.reply \"Google \u00032|\u0003 Error\"\r\n\t\tend\r\n\tend\r\nend"]],"start1":0,"start2":0,"length1":0,"length2":953}]],"length":953,"saved":false}
{"contributors":[],"silentsave":false,"ts":1359478831980,"patch":[[{"diffs":[[0,"arch(1)\r\n\t\t\t"],[1,"#"],[0,"m.reply sear"]],"start1":807,"start2":807,"length1":24,"length2":25}]],"length":954,"saved":false}
{"contributors":[],"silentsave":false,"ts":1359480969208,"patch":[[{"diffs":[[0,"\"//p"],[-1,"[#{number}]/a\")"],[1,"/a\").first"],[0,".inn"]],"start1":441,"start2":441,"length1":23,"length2":18},{"diffs":[[0,"(\"//"],[-1,"table[#{number+3}]/tr/td[@class='j']/font/a[last()]/@href\").text.gsub('/search?q=related:"],[1,"p/a\").first.attributes[\"href\"].value.gsub('/url?q="],[0,"',"],[-1," "],[0,"'')."]],"start1":513,"start2":513,"length1":100,"length2":60},{"diffs":[[0,"sub("],[-1,"'&hl=en', "],[1,"/&.+=.+/,"],[0,"'')\r"]],"start1":574,"start2":574,"length1":18,"length2":17}]],"length":908,"saved":false}
