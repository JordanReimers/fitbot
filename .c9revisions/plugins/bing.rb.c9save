{"ts":1358959467349,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1358959294594,"patch":[[{"diffs":[[1,"# encoding: utf-8\r\n\r\nclass Bing\r\n    include Cinch::Plugin\r\n\r\n\tmatch /b(?:ing)? (.+)/i\r\n\r\n\tdef execute(m, query)\r\n\t\treturn unless ignore_nick(m.user.nick).nil?\r\n\t\tbegin\r\n\r\n\t\t\t@bitly = Bitly.new($BITLYUSER, $BITLYAPI)\r\n\r\n\t\t\t@url = open(\"http://api.bing.net/xml.aspx?AppId=#{$BINGAPI}&Version=2.1&Market=en-US&Query=#{URI.escape(query)}&Sources=web&Web.Count=2&Options=EnableHighlighting&Web.Options=DisableQueryAlterations+DisableHostCollapsing\")\r\n\t\t\t@url = Nokogiri::XML(@url)\r\n\r\n\t\t\tdef search(number)\r\n\t\t\t\ttitle      = @url.xpath(\"//web:WebResult[#{number}]/web:Title\", {\"web\" => \"http://schemas.microsoft.com/LiveSearch/2008/04/XML/web\"}).text\r\n\t\t\t\tdesc       = @url.xpath(\"//web:WebResult[#{number}]/web:Description\", {\"web\" => \"http://schemas.microsoft.com/LiveSearch/2008/04/XML/web\"}).text\r\n\t\t\t\turl        = @url.xpath(\"//web:WebResult[#{number}]/web:Url\", {\"web\" => \"http://schemas.microsoft.com/LiveSearch/2008/04/XML/web\"}).text\r\n\r\n\t\t\t\ttitle = title.gsub(/(|)/, \"\u0002\")\r\n\t\t\t\tdesc = desc.gsub(/(|)/, \"\u0002\")\r\n\r\n\t\t\t\t\"Bing \u00032|\u0003 \\\"%s\\\" %s… \u00032|\u0003 \u001f%s\u001f\" % [title, desc[0..100], url]\r\n\t\t\tend\r\n\r\n\t\t\tmore  = @bitly.shorten(\"http://www.bing.com/search?q=#{URI.escape(query)}\")\r\n\r\n\t\t\tm.reply search(1)\r\n\t\t\tm.reply search(2)\r\n\t\t\tm.reply \"Bing \u00032|\u0003 More results \u001f#{more.shorten}\u001f\"\r\n\t\trescue\r\n\t\t\tm.reply \"Bing \u00032|\u0003 Error\"\r\n\t\tend\r\n\tend\r\nend"]],"start1":0,"start2":0,"length1":0,"length2":1331}]],"length":1331,"saved":false}
{"contributors":[],"silentsave":false,"ts":1373305625348,"patch":[[{"diffs":[[0,"b(/(|)/, \""],[-1,"\u0002"],[0,"\")\r\n\t\t\t\tdesc"]],"start1":962,"start2":962,"length1":25,"length2":24},{"diffs":[[0,"/, \""],[-1,"\u0002"],[0,"\")\r\n"]],"start1":1005,"start2":1005,"length1":9,"length2":8},{"diffs":[[0,"\t\t\"Bing "],[-1,"\u00032|\u0003"],[1,"|"],[0," \\\"%s\\\" "]],"start1":1017,"start2":1017,"length1":20,"length2":17},{"diffs":[[0,"%s… "],[-1,"\u00032|\u0003 \u001f"],[1,"| "],[0,"%s"],[-1,"\u001f"],[0,"\" % "]],"start1":1034,"start2":1034,"length1":17,"length2":12},{"diffs":[[0,"y \"Bing "],[-1,"\u00032|\u0003"],[1,"|"],[0," More re"]],"start1":1219,"start2":1219,"length1":20,"length2":17},{"diffs":[[0,"results "],[-1,"\u001f"],[0,"#{more.s"]],"start1":1234,"start2":1234,"length1":17,"length2":16},{"diffs":[[0,"ten}"],[-1,"\u001f"],[0,"\"\r\n\t"]],"start1":1253,"start2":1253,"length1":9,"length2":8},{"diffs":[[0,"ing "],[-1,"\u00032|\u0003"],[1,"|"],[0," Err"]],"start1":1283,"start2":1283,"length1":12,"length2":9}]],"length":1313,"saved":false}
