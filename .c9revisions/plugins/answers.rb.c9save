{"ts":1358959434946,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1358959290322,"patch":[[{"diffs":[[1,"# encoding: utf-8\r\n\r\nclass Answers\r\n    include Cinch::Plugin\r\n\r\n\tmatch /a(?:nswer)? (.+)$/i\r\n\r\n\tdef execute(m, query)\r\n\t\treturn unless ignore_nick(m.user.nick).nil?\r\n\t\tbegin\r\n\r\n\t\t\t@bitly = Bitly.new($BITLYUSER, $BITLYAPI)\r\n\r\n\t\t\t@url = open(\"http://api.wolframalpha.com/v2/query?appid=#{$WOLFRAMAPI}&input=#{CGI.escape(query)}\")\r\n\t\t\t@url = Nokogiri::XML(@url)\r\n\r\n\t\t\toutput = \"\"\r\n\r\n\t\t\tinput     = @url.xpath(\"//pod[@id='Input']/subpod/plaintext\").text.gsub(/\\s+/, ' ')\r\n\t\t\toutput    = @url.xpath(\"//pod[@title='Result']/subpod/plaintext\").text.gsub(/\\s+/, ' ')\r\n\r\n\t\t\tif output.length < 1\r\n\t\t\t\toutput    = @url.xpath(\"//pod[@title='Results']/subpod[1]/plaintext\").text.gsub(/\\s+/, ' ')\r\n\t\t\tend\r\n\r\n\t\t\tinput  = input[0..140]+\"...\"  if input.length > 140\r\n\t\t\toutput = output[0..140]+\"...\" if output.length > 140\r\n\r\n\t\t\tif output.length < 1 and input.length > 1\r\n\t\t\t\treply = input + \" => Can not render answer. Check link\"\r\n\t\t\telsif output.length < 1 and input.length < 1\r\n\t\t\t\treply = \"Fucked if I know\"\r\n\t\t\telse\r\n\t\t\t\treply = input + \" => \" + output\r\n\t\t\tend\r\n\r\n\t\t\tmore  = @bitly.shorten(\"http://www.wolframalpha.com/input/?i=#{CGI.escape(query)}\")\r\n\r\n\t\t\tm.reply \"Wolfram \u00037|\u0003 %s \u00037|\u0003 More info: %s\" % [reply, more.shorten]\r\n\t\trescue\r\n\t\t\tm.reply \"Wolfram \u00037|\u0003 Error\"\r\n\t\tend\r\n\tend\r\nend"]],"start1":0,"start2":0,"length1":0,"length2":1276}]],"length":1276,"saved":false}
{"contributors":[],"silentsave":false,"ts":1380150776993,"patch":[[{"diffs":[[0,"ew($"],[-1,"BITLYUSER, $BITLYAPI"],[1,"CONFIG.apis.bitly.user, $CONFIG.apis.bitly.api"],[0,")\r\n\r"]],"start1":197,"start2":197,"length1":28,"length2":54},{"diffs":[[0,"ram "],[-1,"\u00037|\u0003 %s \u00037|\u0003"],[1,"| %s |"],[0," Mor"]],"start1":1186,"start2":1186,"length1":20,"length2":14},{"diffs":[[0,"ram "],[-1,"\u00037|\u0003"],[1,"|"],[0," Err"]],"start1":1263,"start2":1263,"length1":12,"length2":9}]],"length":1293,"saved":false}
{"contributors":[],"silentsave":false,"ts":1380150996707,"patch":[[{"diffs":[[0,"=#{$"],[-1,"WOLFRAMAPI"],[1,"CONFIG.apis.wolfram"],[0,"}&in"]],"start1":310,"start2":310,"length1":18,"length2":27}]],"length":1302,"saved":false}
