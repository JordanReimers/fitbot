{"ts":1358959856128,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1358959682324,"patch":[[{"diffs":[[1,"# encoding: utf-8\r\n\r\nclass UserSet\r\n  include Cinch::Plugin\r\n\r\n\r\n    # Last.fm username\r\n\r\n\tmatch /set lastfm (.+)/i, method: :set_lastfm\r\n\tdef set_lastfm(m, username)\r\n\t\treturn unless ignore_nick(m.user.nick).nil?\r\n\t\tbegin\r\n\t\t\told = LastfmDB.first(:nick => m.user.nick.downcase)\r\n\t\t\told.destroy! unless old.nil?\r\n\r\n\t\t\tnew = LastfmDB.new(\r\n\t\t\t\t:nick => m.user.nick.downcase,\r\n\t\t\t\t:username => username.downcase\r\n\t\t\t)\r\n\t\t\tnew.save\r\n\r\n\t\t\tm.reply \"last.fm user updated to: #{username}\", true\r\n\t\trescue\r\n\t\t\tm.reply \"Oops something went wrong\", true\r\n\t\t\traise\r\n\t\tend\r\n\tend \r\n\r\n\r\n\t# Weather location\r\n\r\n\tmatch /set location (.+)/i, method: :set_location\r\n\tdef set_location(m, areacode)\r\n\t\treturn unless ignore_nick(m.user.nick).nil?\r\n\t\tbegin\r\n\t\t\told = LocationDB.first(:nick => m.user.nick.downcase)\r\n\t\t\told.destroy! unless old.nil?\r\n\r\n\t\t\tnew = LocationDB.new(\r\n\t\t\t\t:nick => m.user.nick.downcase,\r\n\t\t\t\t:location => areacode.downcase\r\n\t\t\t)\r\n\t\t\tnew.save\r\n\r\n\t\t\tm.reply \"location updated to: #{areacode}\", true\r\n\t\trescue\r\n\t\t\tm.reply \"Oops something went wrong\", true\r\n\t\t\traise\r\n\t\tend\r\n\tend \r\n\r\nend"]],"start1":0,"start2":0,"length1":0,"length2":1087}]],"length":1087,"saved":false}
