{"ts":1358959781826,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1358959606839,"patch":[[{"diffs":[[1,"# encoding: utf-8\r\n\r\nclass UrbanDictionary\r\n    include Cinch::Plugin\r\n\r\n\tmatch /u(?:r(?:ban)?)? (?:([1-7]{1}) )?(.+)/i, method: :urban\r\n\r\n\tdef urban(m, number, word)\r\n\t\treturn unless ignore_nick(m.user.nick).nil?\r\n\r\n\t\tbegin\r\n\t\t\t@bitly = Bitly.new($BITLYUSER, $BITLYAPI)\r\n\r\n\t\t\tnumber ||= 1\r\n\r\n\t\t\turl = \"http://www.urbandictionary.com/define.php?term=#{CGI.escape(word)}\"\r\n\t\t\turban = Nokogiri::HTML(open(url))\r\n\t\t\tdefine = urban.search(\"//div[@class='definition']\")[number.to_i-1].text.gsub(/\\s+/, ' ')\r\n\r\n\t\t\tif define.length > 255\r\n\t\t\t\tmore = @bitly.shorten(\"http://www.urbandictionary.com/define.php?term=#{CGI.escape(word)}\")\r\n\t\t\t\tdefine = \"#{define[0..255]}... #{more.shorten}\"\r\n\t\t\tend\r\n\r\n\t\t\tm.reply \"UrbanDictionary \u000306|\u0003 #{word} \u000306|\u0003 #{define}\"\r\n\t\trescue\r\n\t\t\tm.reply \"UrbanDictionary \u000306|\u0003 #{word} \u000306|\u0003 Could not find definition\"\r\n\t\tend\r\n\tend\r\nend"]],"start1":0,"start2":0,"length1":0,"length2":854}]],"length":854,"saved":false}
